{
  "name": "AccountContent.tsx",
  "files": [
    {
      "name": "username",
      "imports": "",
      "content": "const AccountContent = () => {\n  const [error, setError] = useState<string | undefined>(\"\");\n  const [success, setSuccess] = useState<string | undefined>(\"\");\n  const [isPending, setIsPending] = useState<boolean | undefined>(false);\n  const pathname = usePathname();\n  const { update } = useSession();\n   const user = useCurrentUser();\n\n  const form = useForm<z.infer<typeof UpdateUserSchema>>({\n    resolver: zodResolver(UpdateUserSchema),\n    defaultValues: {\n      name: user?.name || \"\",\n      username: user?.username || \"\",\n    },\n  });\n\n  async function onSubmit(values: z.infer<typeof UpdateUserSchema>) {\n    try {\n      setIsPending(true);\n      setSuccess(\"\");\n      setError(\"\");\n      if (\n        values.name === user?.name  && values.username === user?.username)\n        return;\n\nif (!/^[a-zA-Z0-9_]+$/.test(values.username)) {\n  return setError(\n    \"Username can only contain letters, numbers, and underscores\",\n  );\n}\n      await updateUserNameUser({\n        name: values.name,\n        username: values.username,\n        pathname,\n      })\n        .then((res) => {\n          if (res?.error) {\n            setError(res.error);\n          }\n          if (res?.success) {\n            setSuccess(res.success);\n          }\n        })\n        .catch((error) => {\n          setError(error);\n        });\n  await update();\n   } catch (error) {\n      setError(\"Something went wrong\");\n    } finally {\n      setIsPending(false);\n    }\n  }\n\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-slate-800 font-bold\">Account</CardTitle>\n        <CardDescription className=\"text-slate-700\">\n          Make changes to your account here. Click save when you&apos;re done.\n        </CardDescription>\n      </CardHeader>\n      {form.getValues(\"name\") ? (\n        <CardContent className=\"space-y-2\">\n          <Dialog>\n            <DialogTrigger>\n              <div className=\"flex w-full gap-28\">\n                <div className=\"rounded-full \">\n                  <Image\n                    src={user?.image}\n                    alt=\"profile \"\n                    width={60}\n                    height={68}\n                    className=\"w-20 h-20 rounded-full\"\n                  />\n                </div>\n                <span className=\" flex gap-2 items-center justify-center text-gray-800 hover:text-black\">\n                  Change Avatar <ArrowRight />\n                </span>\n              </div>\n            </DialogTrigger>\n            <DialogContent className=\"p-0 w-full border-none\">\n              <ChooseAvatar />\n            </DialogContent>\n          </Dialog>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\n              <div className=\"space-y-6 \">\n                <>\n                <FormField\n                    control={form.control}\n                    name=\"username\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"font-semibold text-slate-800\">username</FormLabel>\n                        <FormControl>\n                          <Input\n                            placeholder=\"username\"\n                            type=\"text\"\n                            disabled={isPending}\n                            {...field}\n                          className=\"no-focus border-slate-400 text-gray-600\"    \n/>\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"name\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel className=\"font-semibold text-slate-800\">Name</FormLabel>\n                        <FormControl>\n                          <Input\n                            placeholder=\"name\"\n                            type=\"text\"\n                            disabled={isPending}\n                            {...field}\n                          className=\"no-focus border-slate-400 text-gray-600\"\n      />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  \n                </>\n              </div>\n              <FormError message={error} />\n              <FormSuccess message={success} />\n              <Button\n                type=\"submit\"\n                className=\"w-full text-white bg-slate-800\"\n                disabled={isPending}\n              >\n                Save\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      ) : (\n        <div className=\"m-10\">\n          <Loader color=\"white\" />\n        </div>\n      )}\n    </Card>\n  );\n};",
      "comment": "const AccountContent = () => {"
    }
  ]
}
